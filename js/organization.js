
        // var data = {
        //     "data": [
        //         {
        //             "id": 0,
        //             "level": 0,
        //             "Dept": "董事長",
        //             "position":"董事長",
        //             "name": "Jack",
        //             "ChName": "王小明",
        //             "Num": "",
        //             "Ext": "000",
        //             "area": "",
        //             "pic": "user00.jpeg",
        //             "count": "10",
        //             "teamDetail":"",
        //             "childrens": [
        //                 {
        //                 "id": 1,
        //                 "level": 1,
        //                 "Dept": "總管理室",
        //                 "position":"General Manager",
        //                 "name": "Tony",
        //                 "ChName": "王小明",
        //                 "Num": "",
        //                 "Ext": "000",
        //                 "area": "新店9樓",
        //                 "pic": "user00.jpeg",
        //                 "count": "10",
        //                 "teamDetail":"我是總管理室",
        //                 "childrens": [
        //                     {
        //                         "id": 2,
        //                         "level": 2,
        //                         "Dept": "Dept.",
        //                         "position":"Director",
        //                         "name": "Charlie",
        //                         "ChName": "王小明",
        //                         "Num": "",
        //                         "Ext": "000",
        //                         "area": "新店9樓",
        //                         "Num": "1091201",
        //                         "pic": "user01.jpeg",
        //                         "count": "20",
        //                         "teamDetail":"我是 BA dept.",
        //                         "childrens": [
        //                         {
        //                             "id": 5,
        //                             "level": 3,
        //                             "Dept": ".Net",
        //                             "position":"Manager",
        //                             "name": "Kerry",
        //                             "ChName": "王小明",
        //                             "Num": "1092021",
        //                             "Ext": "000",
        //                             "area": "新店9樓",
        //                             "pic": "user02.jpeg",
        //                             "count": "10",
        //                             "teamDetail":"我是 .Net",
        //                             "childrens": [
        //                                 {
        //                                     "id": 10,
        //                                     "level": 5,
        //                                     "pic": "user03.jpeg",
        //                                     "position":"Development Engineer",
        //                                     "name": "Person1",
        //                                     "ChName": "張大明",
        //                                     "Num": "1092021",
        //                                     "Ext": "000",
        //                                     "area": "新店10樓",
        //                                     "childrens": [
                                                
        //                                         ]
        //                                 },
        //                                 {
        //                                     "id": 11,
        //                                     "level": 5,
        //                                     "pic": "user03.jpeg",
        //                                     "position":"Development Engineer",
        //                                     "name": "person2",
        //                                     "ChName": "張大明",
        //                                     "Num": "1092021",
        //                                     "Ext": "000",
        //                                     "area": "新店10樓",
        //                                     "childrens": []
        //                                 },
        //                                 {
        //                                     "id": 12,
        //                                     "level": 5,
        //                                     "pic": "user03.jpeg",
        //                                     "position":"Development Engineer",
        //                                     "name": "person3",
        //                                     "ChName": "張大明",
        //                                     "Num": "1092021",
        //                                     "Ext": "000",
        //                                     "area": "新店10樓",
        //                                     "childrens": []
        //                                 }]
        //                         },
        //                         {
        //                             "id": 6,
        //                             "level": 3,
        //                             "Dept":"Dept.",
        //                             "position":"Manager",
        //                             "name": "Gary",
        //                             "ChName": "王小明",
        //                             "Num": "1092021",
        //                             "Ext": "000",
        //                             "area": "新店9樓",
        //                             "pic": "user02.jpeg",
        //                             "count": "10",
        //                             "teamDetail":"我是 ",
        //                             "childrens": [
        //                                 {
        //                                     "id": 13,
        //                                     "level": 5,
        //                                     "pic": "user03.jpeg",
        //                                     "position":"Development Engineer",
        //                                     "name": "person4",
        //                                     "ChName": "張大明",
        //                                     "Num": "1092021",
        //                                     "Ext": "000",
        //                                     "area": "新店10樓",
        //                                     "childrens": []
        //                                 },
        //                             ]
        //                             },
        //                         ]
        //                     },
        //                     {
        //                         "id": 3,
        //                         "level": 2,
        //                         "Dept":"Dept.",
        //                         "position":"Manager",
        //                         "name": "SAP",
        //                         "ChName": "王小明",
        //                         "Num": "1092021",
        //                         "Ext": "000",
        //                         "area": "新店9樓",
        //                         "pic": "user01.jpeg",
        //                         "count": "",
        //                         "teamDetail":"我是 ",
        //                         "childrens": [
        //                             {
        //                                 "id": 7,
        //                                 "level": 3,
        //                                 "Dept":"Dept.",
        //                                 "name": "OOO",
        //                                 "position":"Manager",
        //                                 "name": "OOO",
        //                                 "ChName": "王小明",
        //                                 "Num": "1092021",
        //                                 "Ext": "000",
        //                                 "area": "新店9樓",
        //                                 "pic": "user02.jpeg",
        //                                 "count": "10",
        //                                 "teamDetail":"我是 ",
        //                                 "childrens": [{
        //                                     "id": 14,
        //                                     "level": 5,
        //                                     "pic": "user03.jpeg",
        //                                     "position":"Development Engineer",
        //                                     "name": "person5",
        //                                     "ChName": "張大明",
        //                                     "Num": "1092021",
        //                                     "Ext": "000",
        //                                     "area": "新店10樓",
        //                                     "childrens": []
        //                                 }]
        //                             },
        //                             {
        //                                 "id": 8,
        //                                 "level": 3,
        //                                 "Dept":"Dept.",
        //                                 "position":"Manager",
        //                                 "name": "OOO",
        //                                 "ChName": "王小明",
        //                                 "Num": "1092021",
        //                                 "Ext": "000",
        //                                 "area": "新店9樓",
        //                                 "pic": "user02.jpeg",
        //                                 "count": "10",
        //                                 "teamDetail":"我是 ",
        //                                 "childrens": [{
        //                                     "id": 15,
        //                                     "level": 5,
        //                                     "pic": "user03.jpeg",
        //                                     "position":"Development Engineer",
        //                                     "name": "person6",
        //                                     "ChName": "張大明",
        //                                     "Num": "1092021",
        //                                     "Ext": "000",
        //                                     "area": "新店10樓",
        //                                     "childrens": []
        //                                 }]
        //                             }
        //                         ]
        //                     },
        //                     {
        //                         "id": 4,
        //                         "level": 2,
        //                         "Dept":"Dept.",
        //                         "position":"Director",
        //                         "name": "Collin",
        //                         "ChName": "王小明",
        //                         "Num": "1092021",
        //                         "Ext": "000",
        //                         "area": "新店9樓",
        //                         "pic": "user01.jpeg",
        //                         "count": "20",
        //                         "teamDetail":"我是業務部 ",
        //                         "childrens": [{
        //                             "id": 9,
        //                             "level": 3,
        //                             "Dept":"業務部",
        //                             "position":"Manager",
        //                             "name": "OOO",
        //                             "ChName": "王小明",
        //                             "Num": "1092021",
        //                             "Ext": "000",
        //                             "area": "新店9樓",
        //                             "pic": "user02.jpeg",
        //                             "count": "10",
        //                             "teamDetail":"我是業務部A",
        //                             "childrens": [{
        //                                 "id": 16,
        //                                 "level": 5,
        //                                 "pic": "user03.jpeg",
        //                                 "position":"Development Engineer",
        //                                 "name": "person7",
        //                                 "ChName": "張大明",
        //                                 "Num": "1092021",
        //                                 "Ext": "000",
        //                                 "area": "新店10樓",
        //                                 "childrens": []
        //                             }]
        //                         }]
        //                     }
        //                 ]
        //                 }
        //             ]
        //     }]
        // }
        var data = {
            "data": [
                {
                        "id": 1,
                        "level": 1,
                        "Dept": "總管理室",
                        "position":"General Manager",
                        "name": "Tony",
                        "ChName": "王小明",
                        "Num": "",
                        "Ext": "000",
                        "area": "新店9樓",
                        "pic": "user00.jpeg",
                        "count": "10",
                        "teamDetail":"我是總管理室",
                        "childrens": [
                            {
                                "id": 2,
                                "level": 2,
                                "Dept": "Dept.",
                                "position":"Director",
                                "name": "Charlie",
                                "ChName": "王小明",
                                "Num": "",
                                "Ext": "000",
                                "area": "新店9樓",
                                "Num": "1091201",
                                "pic": "user01.jpeg",
                                "count": "20",
                                "teamDetail":"我是 BA dept.",
                                "childrens": [
                                    {
                                    "id": 5,
                                    "level": 3,
                                    "Dept": ".Net",
                                    "position":"Manager",
                                    "name": "Kerry",
                                    "ChName": "王小明",
                                    "Num": "1092021",
                                    "Ext": "000",
                                    "area": "新店9樓",
                                    "pic": "user02.jpeg",
                                    "count": "10",
                                    "teamDetail":"我是 .Net",
                                    "childrens": [
                                        {
                                            "id": 10,
                                            "level": 5,
                                            "pic": "user03.jpeg",
                                            "position":"Development Engineer",
                                            "name": "Person1",
                                            "ChName": "張大明",
                                            "Num": "1092021",
                                            "Ext": "000",
                                            "area": "新店10樓",
                                            "childrens": [
                                                
                                                ]
                                        },
                                        {
                                            "id": 11,
                                            "level": 5,
                                            "pic": "user03.jpeg",
                                            "position":"Development Engineer",
                                            "name": "person2",
                                            "ChName": "張大明",
                                            "Num": "1092021",
                                            "Ext": "000",
                                            "area": "新店10樓",
                                            "childrens": []
                                        },
                                        {
                                            "id": 12,
                                            "level": 5,
                                            "pic": "user03.jpeg",
                                            "position":"Development Engineer",
                                            "name": "person3",
                                            "ChName": "張大明",
                                            "Num": "1092021",
                                            "Ext": "000",
                                            "area": "新店10樓",
                                            "childrens": []
                                        }]
                                },
                                {
                                    "id": 6,
                                    "level": 3,
                                    "Dept":"Dept.",
                                    "position":"Manager",
                                    "name": "Gary",
                                    "ChName": "王小明",
                                    "Num": "1092021",
                                    "Ext": "000",
                                    "area": "新店9樓",
                                    "pic": "user02.jpeg",
                                    "count": "10",
                                    "teamDetail":"我是 ",
                                    "childrens": [
                                        {
                                            "id": 13,
                                            "level": 5,
                                            "pic": "user03.jpeg",
                                            "position":"Development Engineer",
                                            "name": "person4",
                                            "ChName": "張大明",
                                            "Num": "1092021",
                                            "Ext": "000",
                                            "area": "新店10樓",
                                            "childrens": []
                                        },
                                    ]
                                    },
                                ]
                            },
                            {
                                "id": 3,
                                "level": 2,
                                "Dept":"Dept.",
                                "position":"Manager",
                                "name": "SAP",
                                "ChName": "王小明",
                                "Num": "1092021",
                                "Ext": "000",
                                "area": "新店9樓",
                                "pic": "user01.jpeg",
                                "count": "",
                                "teamDetail":"我是 ",
                                "childrens": [
                                    {
                                        "id": 7,
                                        "level": 3,
                                        "Dept":"Dept.",
                                        "name": "OOO",
                                        "position":"Manager",
                                        "name": "OOO",
                                        "ChName": "王小明",
                                        "Num": "1092021",
                                        "Ext": "000",
                                        "area": "新店9樓",
                                        "pic": "user02.jpeg",
                                        "count": "10",
                                        "teamDetail":"我是 ",
                                        "childrens": [{
                                            "id": 14,
                                            "level": 5,
                                            "pic": "user03.jpeg",
                                            "position":"Development Engineer",
                                            "name": "person5",
                                            "ChName": "張大明",
                                            "Num": "1092021",
                                            "Ext": "000",
                                            "area": "新店10樓",
                                            "childrens": []
                                        }]
                                    },
                                    {
                                        "id": 8,
                                        "level": 3,
                                        "Dept":"Dept.",
                                        "position":"Manager",
                                        "name": "OOO",
                                        "ChName": "王小明",
                                        "Num": "1092021",
                                        "Ext": "000",
                                        "area": "新店9樓",
                                        "pic": "user02.jpeg",
                                        "count": "10",
                                        "teamDetail":"我是 ",
                                        "childrens": [{
                                            "id": 15,
                                            "level": 5,
                                            "pic": "user03.jpeg",
                                            "position":"Development Engineer",
                                            "name": "person6",
                                            "ChName": "張大明",
                                            "Num": "1092021",
                                            "Ext": "000",
                                            "area": "新店10樓",
                                            "childrens": []
                                        }]
                                    }
                                ]
                            },
                            {
                                "id": 4,
                                "level": 2,
                                "Dept":"Dept.",
                                "position":"Director",
                                "name": "Collin",
                                "ChName": "王小明",
                                "Num": "1092021",
                                "Ext": "000",
                                "area": "新店9樓",
                                "pic": "user01.jpeg",
                                "count": "20",
                                "teamDetail":"我是業務部 ",
                                "childrens": [{
                                    "id": 9,
                                    "level": 3,
                                    "Dept":"業務部",
                                    "position":"Manager",
                                    "name": "OOO",
                                    "ChName": "王小明",
                                    "Num": "1092021",
                                    "Ext": "000",
                                    "area": "新店9樓",
                                    "pic": "user02.jpeg",
                                    "count": "10",
                                    "teamDetail":"我是業務部A",
                                    "childrens": [{
                                        "id": 16,
                                        "level": 5,
                                        "pic": "user03.jpeg",
                                        "position":"Development Engineer",
                                        "name": "person7",
                                        "ChName": "張大明",
                                        "Num": "1092021",
                                        "Ext": "000",
                                        "area": "新店10樓",
                                        "childrens": []
                                    }]
                                }]
                            }
                        ]
                        }
            ]
        }
        function showall(menu_list, parent) {
            $.each(menu_list, function (index, val) {
                // console.log(val);
                if (val.id == 0) {
                    var li = $("<li></li>").addClass("level"+val.level);
                    li.append(
                    `<a class="organization_text" href='javascript:void(0)' onclick=getOrgId(${val.id});>
                        <div class="header d-flex">
                            <span class="col-10 dept">${val.Dept}</span>
                            <span class="col-2 icon" data-bs-toggle="modal" data-bs-target="#exampleModal${val.id}"><i class="far fa-id-card "></i></span>
                        </div>
                    
                        <div class="row align-items-center">
                            <div class="col-lg-4 col-12">
                                <div class="pic">
                                    <img src="../public/img/organization/${val.pic}">
                                </div>
                            </div>
                            <div class="col-lg-8 col-12 px-3 py-1 text-left">
                                <p class="position">${val.position}</p>
                                <p class="name">${val.ChName} &nbsp; <span class="name">${val.name}</span></p>
                                <p class="name text-black-50">${val.Num}</p>
                            </div>
                        </div>
                        <div class="row justify-content-between px-1">
                            <div class="col">
                                <p>分機<span>${val.Ext}</span></p>
                            </div>
                            <div class="col">
                                <p><span>${val.area}</span></p>
                            </div>
                            <div class="col">
                                <p class="count d-flex justify-content-between"><i class="fas fa-user">&nbsp;${val.count} </i>
                                </p>
                            </div>
                        </div>
                         <div class="detail">${val.teamDetail}</div>
                    </a>`
                    ).append("<ul></ul>").appendTo(parent);
                    //递归显示
                    showall(val.childrens, $(li).children().eq(1));
                } 
                else if (val.childrens.length > 0) {
                    var li = $("<li></li>").addClass("level"+val.level);
                    li.append(
                    `<a class="organization_text" href='javascript:void(0)' onclick=getOrgId(${val.id});>
                        <div class="header d-flex">
                            <span class="col-10 dept">${val.Dept}</span>
                            <span class="col-2 icon" data-bs-toggle="modal" data-bs-target="#exampleModal${val.id}"><i class="far fa-id-card "></i></span>
                        </div>
                    
                        <div class="row align-items-center">
                            <div class="col-lg-4 col-12">
                                <div class="pic">
                                    <img src="../public/img/organization/${val.pic}">
                                </div>
                            </div>
                            <div class="col-lg-8 col-12 px-3 py-1 text-left">
                                <p class="position">${val.position}</p>
                                <p class="name">${val.ChName} &nbsp; <span class="name">${val.name}</span></p>
                                <p class="name text-black-50">${val.Num}</p>
                            </div>
                        </div>
                        <div class="row justify-content-between px-1">
                            <div class="col">
                                <p>分機<span>${val.Ext}</span></p>
                            </div>
                            <div class="col">
                                <p><span>${val.area}</span></p>
                            </div>
                            <div class="col">
                                <p class="count d-flex justify-content-between"><i class="fas fa-user">&nbsp;${val.count} </i>
                                </p>
                            </div>
                        </div>
                        <div class="more"><i class="fas fa-minus"></i></div>
                        <div class="detail">${val.teamDetail}</div>
                    </a>`
                    ).append("<ul></ul>").appendTo(parent);
                    //递归显示
                    showall(val.childrens, $(li).children().eq(1));
                }
                else {
                   var li = $("<li></li>").addClass("level"+val.level);
                    li.append(
                        `<a class="organization_text" href='javascript:void(0)' onclick=getOrgId(${val.id});>
                        <div class="row align-items-center p-1">
                            <div class="col-4">
                                <div class="pic">
                                    <img src="../public/img/organization/${val.pic}">
                                </div>
                            </div>
                            <div class="col-8">
                                <p class="position lh-15">${val.position}</p>
                                <p class="name lh-20">${val.ChName} &nbsp; <span class="name">${val.name}</span></p>
                                <p class="name text-black-50">${val.Num}</p>
                            </div>
                        </div>
                        <div class="row justify-content-between">
                            <div class="col">
                                <p>分機<span>${val.Ext}</span></p>
                            </div>
                            <div class="col">
                                <p><span>${val.area}</span></p>
                            </div>
                        </div>
                        </a>
                        `).append("<ul class='grid'></ul>").appendTo(parent);
                }
            });
            $.each(menu_list, function (index, val) {
                // console.log(val);
                const Area = document.querySelector('#modalArea')
                if (val.childrens.length > 0) {
                    $(`<div class="modal fade" id="exampleModal${val.id}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">${val.Dept}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            ${val.teamDetail}
                        </div>
                        
                        </div>
                    </div>
                    </div>`).appendTo(Area);
                    
                    //递归显示
                    // showall(val.childrens, $(li).children().eq(1));
                } 
            });
            // menu_list.appendTo('.jOrgChart')
        }

        var showlist = $("<ul id='org' style='display:none'></ul>");
        showall(data.data, showlist);
        $("#jOrgChart").append(showlist);
        $("#org").jOrgChart({
            chartElement: '#jOrgChart', //指定在某个dom生成jorgchart
            dragAndDrop: false //设置是否可拖动
        });

        function getOrgId(val) {
            // console.log(val);
        }
// $(document).ready(function () {
//     $('.fa-id-card').click(function () {
//         $(this).parent().next('div.modal').toggleClass('open');
//     })
// })
